"use strict";(self.webpackChunkqotli=self.webpackChunkqotli||[]).push([[6134],{6134:(D,_,o)=>{o.r(_),o.d(_,{ServicesModule:()=>V});var r=o(6814),g=o(95),f=o(9252),S=o(1122),m=o(9552),a=o(707),E=o(1913),d=o(74),u=o(2129),v=o(8645),h=o(5219),e=o(9467),N=o(4658),x=o(4480),C=o(4104),T=o(6340),Z=o(3714),M=o(6218),A=o(5167),y=o(3530);function J(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deleteSelectedServices())}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.selectedServices||!t.selectedServices.length)}}function I(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openNew())}),e.qZA(),e.YNc(2,J,1,1,"button",21),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedServices.length)}}function U(i,p){1&i&&e._UZ(0,"p-fileUpload",23),2&i&&e.Q6J("maxFileSize",1e6)("disabled",!0)}function R(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"h5",25),e._uU(2,"G\xe9rer les prestations"),e.qZA(),e.TgZ(3,"span",26),e._UZ(4,"i",27),e.TgZ(5,"input",28),e.NdJ("input",function(n){e.CHM(t);const l=e.oxw(),c=e.MAs(10);return e.KtG(l.onGlobalFilter(c,n))}),e.qZA()()()}}function w(i,p){1&i&&(e.TgZ(0,"tr")(1,"th",29),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",30),e._uU(4,"Nom "),e._UZ(5,"p-sortIcon",31),e.qZA(),e.TgZ(6,"th",32),e._uU(7,"Prix par d\xe9faut "),e._UZ(8,"p-sortIcon",33),e.qZA(),e._UZ(9,"th"),e.qZA())}function F(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",34),e.qZA(),e.TgZ(3,"td",35)(4,"span",36),e._uU(5,"Nom"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td",37)(8,"span",36),e._uU(9,"Prix par d\xe9faut"),e.qZA(),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td")(13,"div",38)(14,"button",39),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.editService(l))}),e.qZA(),e.TgZ(15,"button",40),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.deleteService(l))}),e.qZA()()()()}if(2&i){const t=p.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(4),e.hij(" ",t.name," "),e.xp6(4),e.hij(" ",e.xi3(11,3,t.price,"EUR")," ")}}function H(i,p){1&i&&(e.TgZ(0,"small",51),e._uU(1,'Le champs "Nom" est requis'),e.qZA())}const z=i=>({"ng-invalid ng-dirty":i});function B(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"label",42),e._uU(2,"Nom"),e.qZA(),e.TgZ(3,"input",43),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.service.name=n)}),e.qZA(),e.YNc(4,H,2,0,"small",44),e.qZA(),e.TgZ(5,"div",41)(6,"label",45),e._uU(7,"Description"),e.qZA(),e.TgZ(8,"textarea",46),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.service.description=n)}),e.qZA()(),e.TgZ(9,"div",47)(10,"div",48)(11,"label",49),e._uU(12,"Prix par d\xe9faut"),e.qZA(),e.TgZ(13,"p-inputNumber",50),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.service.price=n)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.service.name)("ngClass",e.VKq(5,z,t.submitted&&!t.service.name)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.service.name),e.xp6(4),e.Q6J("ngModel",t.service.description),e.xp6(5),e.Q6J("ngModel",t.service.price)}}function k(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.hideDialog())}),e.qZA(),e.TgZ(1,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveService())}),e.qZA()}}function q(i,p){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Confirmez-vous la suppression de "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4," ?"),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.service.name)}}function P(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteServiceDialog=!1)}),e.qZA(),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirmDelete())}),e.qZA()}}function G(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteServicesDialog=!1)}),e.qZA(),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirmDeleteSelected())}),e.qZA()}}const K=()=>["name","country.name","representative.name","status"],O=()=>[10,20,30],b=()=>({width:"450px"});let Y=(()=>{class i{constructor(t,s){this.servicesService=t,this.messageService=s,this.unsubscribe=new v.x,this.serviceDialog=!1,this.deleteServiceDialog=!1,this.deleteServicesDialog=!1,this.services=[],this.selectedServices=[],this.submitted=!1,this.cols=[],this.statuses=[],this.rowsPerPageOptions=[5,10,20]}ngOnInit(){this.services=this.servicesService.getServices()}ngOnDestroy(){this.unsubscribe.next()}openNew(){this.service={id:this.getRandomId(),name:"",description:"",price:0},this.submitted=!1,this.serviceDialog=!0}deleteSelectedServices(){this.deleteServicesDialog=!0}editService(t){this.service={...t},this.serviceDialog=!0}deleteService(t){this.deleteServiceDialog=!0,this.service={...t}}confirmDeleteSelected(){this.deleteServicesDialog=!1,this.services=this.services.filter(t=>!this.selectedServices.includes(t)),this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Prestation supprim\xe9e",life:3e3}),this.selectedServices=[]}confirmDelete(){this.deleteServiceDialog=!1,this.services=this.services.filter(t=>t.id!==this.service.id),this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Prestation supprim\xe9e",life:3e3}),this.service=null}hideDialog(){this.serviceDialog=!1,this.submitted=!1}saveService(){if(this.submitted=!0,!this.service)return;const t=this.findIndexById(this.service.id),s=-1!==t;this.service.name?.trim()&&(s?(this.services[t]=this.service,this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Prestation modifi\xe9e",life:3e3})):(this.services.push(this.service),this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Prestation cr\xe9\xe9e",life:3e3})),this.services=[...this.services],this.serviceDialog=!1,this.service=null)}findIndexById(t){let s=-1;for(let n=0;n<this.services.length;n++)if(this.services[n].id===t){s=n;break}return s}getRandomId(){let t="";for(let l=0;l<10;l++)t+="0123456789".charAt(Math.floor(10*Math.random()));const n=parseInt(t);return-1!==this.findIndexById(n)?this.getRandomId():n}onGlobalFilter(t,s){t.filterGlobal(s.target.value,"contains")}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(N.r),e.Y36(h.ez))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e._Bn([h.ez])],decls:28,vars:27,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","D\xe9tails d'une prestation",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirmation",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"my-2"],["pButton","","pRipple","","label","Nouvelle prestation","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Supprimer","icon","pi pi-trash","class","p-button-danger",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","label","Supprimer","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize","disabled"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],["pSortableColumn","price"],["field","price"],[3,"value"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],[2,"width","14%","min-width","8rem"],[1,"flex","justify-content-end"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","name"],["type","text","pInputText","","id","name","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","description"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["id","price","mode","currency","currency","EUR","locale","fr-fr",3,"ngModel","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4," Prestations "),e.qZA(),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",3),e.YNc(7,I,3,1,"ng-template",4)(8,U,1,2,"ng-template",5),e.qZA(),e.TgZ(9,"p-table",6,7),e.NdJ("selectionChange",function(c){return n.selectedServices=c}),e.YNc(11,R,6,0,"ng-template",8)(12,w,10,0,"ng-template",9)(13,F,16,6,"ng-template",10),e.qZA()(),e.TgZ(14,"p-dialog",11),e.NdJ("visibleChange",function(c){return n.serviceDialog=c}),e.YNc(15,B,14,7,"ng-template",12)(16,k,2,0,"ng-template",13),e.qZA(),e.TgZ(17,"p-dialog",14),e.NdJ("visibleChange",function(c){return n.deleteServiceDialog=c}),e.TgZ(18,"div",15),e._UZ(19,"i",16),e.YNc(20,q,5,1,"span",17),e.qZA(),e.YNc(21,P,2,0,"ng-template",13),e.qZA(),e.TgZ(22,"p-dialog",18),e.NdJ("visibleChange",function(c){return n.deleteServicesDialog=c}),e.TgZ(23,"div",15),e._UZ(24,"i",16),e.TgZ(25,"span"),e._uU(26,"Confirmez-vous la suppression des prestations s\xe9lectionn\xe9es ?"),e.qZA()(),e.YNc(27,G,2,0,"ng-template",13),e.qZA()()()),2&s&&(e.xp6(9),e.Q6J("value",n.services)("columns",n.cols)("rows",10)("globalFilterFields",e.DdM(22,K))("paginator",!0)("rowsPerPageOptions",e.DdM(23,O))("showCurrentPageReport",!0)("selection",n.selectedServices)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(24,b)),e.Q6J("visible",n.serviceDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(25,b)),e.Q6J("visible",n.deleteServiceDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",n.service),e.xp6(2),e.Akn(e.DdM(26,b)),e.Q6J("visible",n.deleteServicesDialog)("modal",!0))},dependencies:[r.mk,r.O5,g.Fj,g.JJ,g.Q7,g.On,m.iA,h.jx,m.lQ,m.fz,m.UA,m.Mo,a.Hq,x.H,C.FN,T.o,Z.o,M.g,A.Rn,y.V,r.H9],encapsulation:2})}return i})(),Q=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[u.Bz.forChild([{path:"",component:Y}]),u.Bz]})}return i})();var j=o(3965),L=o(1865);let V=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[r.ez,g.u5,f.S,S.$9,m.U$,E.l,d.ml,a.hJ,Q,x.T,C.EV,T.V,Z.j,M.A,j.kW,L.cc,A.L$,y.S]})}return i})()},6218:(D,_,o)=>{o.d(_,{A:()=>m,g:()=>S});var r=o(9467),g=o(6814),f=o(95);let S=(()=>{class a{el;ngModel;control;cd;autoResize;onResize=new r.vpe;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(d,u,v,h){this.el=d,this.ngModel=u,this.control=v,this.cd=h}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewChecked(){this.updateState()}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(d){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(d){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(d||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(u){return new(u||a)(r.Y36(r.SBq),r.Y36(f.On,8),r.Y36(f.a5,8),r.Y36(r.sBO))};static \u0275dir=r.lG2({type:a,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(u,v){1&u&&r.NdJ("input",function(e){return v.onInput(e)}),2&u&&r.ekj("p-filled",v.filled)("p-inputtextarea-resizable",v.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}})}return a})(),m=(()=>{class a{static \u0275fac=function(u){return new(u||a)};static \u0275mod=r.oAB({type:a});static \u0275inj=r.cJS({imports:[g.ez]})}return a})()}}]);